<div class="profile-container">
    <!-- User Info -->
    <div class="profile-card">
        <div class="profile-header">
            <div id="profileAvatarContainer" class="profile-avatar">
                <!-- Avatar or Initial will be loaded here -->
            </div>
            <input
                type="file"
                id="avatarUpload"
                accept="image/jpeg,image/jpg,image/png,image/gif,image/webp"
                style="display: none"
            />

            <input
                type="file"
                id="avatarUpload"
                accept="image/jpeg,image/jpg,image/png,image/gif,image/webp"
                style="display: none"
            />
            <div class="username-container">
                <h2 id="userName" class="profile-username">Loading...</h2>
                <span id="editUsernameBtn" class="edit-icon"></span>
            </div>
            <p id="userEmail" class="profile-email">Loading...</p>
            <p id="user-tier" class="current-tier">Loading Tier...</p>
            <p
                id="tier-expiry"
                class="tier-expiry-date"
                style="display: none"
            ></p>
        </div>
    </div>

    <!-- Subscription Management -->
    <div class="profile-card">
        <h2>Subscription</h2>
        <p>
            Manage your current plan, view benefits, or cancel your
            subscription.
        </p>
        <button id="manageSubscription" class="button">
            Manage Subscription
        </button>
    </div>

    <!-- Referral Program -->
    <div class="profile-card">
        <h2>Refer a Friend</h2>
        <p>Invite friends and earn rewards when they subscribe.</p>
        <button id="referralBtn" class="button">View Referrals</button>
    </div>

    <!-- Settings -->
    <div class="profile-card">
        <h2>Settings</h2>
        <!-- Dark Mode Toggle -->
        <div class="setting-item">
            <label for="darkModeToggle">Dark Mode</label>
            <input type="checkbox" id="darkModeToggle" class="toggle-input" />
            <label class="switch" for="darkModeToggle">
                <svg viewBox="0 0 212.4992 84.4688" overflow="visible">
                    <path
                        pathLength="360"
                        fill="none"
                        stroke="currentColor"
                        d="M 42.2496 0 A 42.24 42.24 90 0 0 0 42.2496 A 42.24 42.24 90 0 0 42.2496 84.4688 A 42.24 42.24 90 0 0 84.4992 42.2496 A 42.24 42.24 90 0 0 42.2496 0 A 42.24 42.24 90 0 0 0 42.2496 A 42.24 42.24 90 0 0 42.2496 84.4688 L 170.2496 84.4688 A 42.24 42.24 90 0 0 212.4992 42.2496 A 42.24 42.24 90 0 0 170.2496 0 A 42.24 42.24 90 0 0 128 42.2496 A 42.24 42.24 90 0 0 170.2496 84.4688 A 42.24 42.24 90 0 0 212.4992 42.2496 A 42.24 42.24 90 0 0 170.2496 0 L 42.2496 0"
                    ></path>
                </svg>
            </label>
        </div>
        <!-- Notification Toggle -->
        <div
            id="notification-settings-card"
            class="setting-item"
            data-tier="premium"
        >
            <label for="predictionAlertsToggle">Prediction Alerts</label>
            <input
                type="checkbox"
                id="predictionAlertsToggle"
                class="toggle-input"
            />
            <label class="switch" for="predictionAlertsToggle">
                <svg viewBox="0 0 212.4992 84.4688" overflow="visible">
                    <path
                        pathLength="360"
                        fill="none"
                        stroke="currentColor"
                        d="M 42.2496 0 A 42.24 42.24 90 0 0 0 42.2496 A 42.24 42.24 90 0 0 42.2496 84.4688 A 42.24 42.24 90 0 0 84.4992 42.2496 A 42.24 42.24 90 0 0 42.2496 0 A 42.24 42.24 90 0 0 0 42.2496 A 42.24 42.24 90 0 0 42.2496 84.4688 L 170.2496 84.4688 A 42.24 42.24 90 0 0 212.4992 42.2496 A 42.24 42.24 90 0 0 170.2496 0 A 42.24 42.24 90 0 0 128 42.2496 A 42.24 42.24 90 0 0 170.2496 84.4688 A 42.24 42.24 90 0 0 212.4992 42.2496 A 42.24 42.24 90 0 0 170.2496 0 L 42.2496 0"
                    ></path>
                </svg>
            </label>
        </div>
    </div>

    <!-- FAQ Section -->
    <div class="profile-card">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-container">
            <div class="faq-item">
                <button class="faq-question">
                    <span>How do I upgrade my subscription?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Click on the "Manage Subscription" button above or navigate to the Subscriptions page from the bottom menu. Choose your desired tier and complete the payment process.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question">
                    <span>How does the referral program work?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Share your unique referral code with friends. When they sign up and subscribe to a paid tier, you'll earn rewards. View your referrals and rewards in the Referral page.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question">
                    <span>What's the difference between subscription tiers?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p><strong>Free Tier:</strong> Basic predictions with ads<br>
                    <strong>Premium:</strong> More predictions, no ads<br>
                    <strong>VIP:</strong> Advanced analytics and insights<br>
                    <strong>VVIP:</strong> All features plus priority support</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question">
                    <span>Can I change my username?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Yes! Click the edit icon next to your username at the top of this page to change it.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question">
                    <span>How do I cancel my subscription?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Go to "Manage Subscription" and click the cancel button. You'll retain access until the end of your current billing period.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question">
                    <span>What should I do if I forgot my password?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Click the "Forgot Password" link on the login page. Enter your email and we'll send you a reset link.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question">
                    <span>How accurate are the AI predictions?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>Our AI analyzes team stats, form, and historical data to provide predictions. Accuracy varies by league and match, but VIP users can view detailed accuracy statistics in the Insights page.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question">
                    <span>What does "Reset Local Cache" do?</span>
                    <span class="faq-icon">+</span>
                </button>
                <div class="faq-answer">
                    <p>This clears saved data like preferences and cached predictions from your browser. Your account data remains safe on our servers.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Danger Zone -->
    <div class="profile-card danger-zone">
        <h2>Danger Zone</h2>
        <div class="danger-actions">
            <button id="resetStorage" class="button btn-danger">
                Reset Local Cache
            </button>
            <button id="logoutBtn" class="button btn-danger">Logout</button>
        </div>
    </div>
</div>

<style data-dynamic="true">
    .danger-zone {
        border-color: #d9534f;
    }
    .danger-zone h2 {
        color: #d9534f;
    }
    .danger-actions {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }
    #notification-settings-card[data-locked="true"] {
        display: none;
    }
</style>
